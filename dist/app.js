!function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/dist",t(t.s=6)}([function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var r=n(4),i=o(r),a=n(2),s=o(a);!function(){var e={orientation:0,dpi:2,height:window.innerHeight,width:window.innerWidth,renderOptions:{antialias:!0,backgroundColor:16777215}};Tiny.app=new Tiny.Application(e),{init:function(){console.log("init"),this.resourceLoad()},resourceLoad:function(){var e=[];for(var t in s.default)e.push(s.default[t]);var n=document.getElementById("progress"),o=document.getElementById("percent");Tiny.Loader.run({resources:e,onProgress:function(e,t){console.log("percent:",e+"%",t.name);var r=~~e;o.innerHTML=r+"%",n.style.width=r+"%"},onAllComplete:function(){console.log("all complete");var e=document.body;e.removeChild(o),e.removeChild(n.parentNode),Tiny.app.run(new i.default)}})}}.init()}()},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=function(e){function t(e){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.render=function(){for(var e=0;e<n.foodNum;e++){var t=null,o=Math.round(7*Math.random()),r=Tiny.WIN_SIZE.height;t=/png/.test(n.color[o])?n.drawSprite(o):n.drawCircle(o);var i=Math.abs(Tiny.WIN_SIZE.width/2-t.x),a=Math.abs(Tiny.WIN_SIZE.height/2-t.y);Math.sqrt(Math.pow(i,2)+Math.pow(a,2))<=20||t.position.y>r-260?e--:n.addChild(t)}n.layer.addChild(n)},n.drawCircle=function(e){var t=n.randomPos(),o=t.x,r=t.y,i=n.foodConfig,a=i.maxR,s=i.minR,c=(a-s)*Math.random()+s,u=new Tiny.Graphics;return u.beginFill(n.color[e%n.color.length]),u.drawCircle(0,0,c),u.setPosition(o,r),u.endFill(),u},n.randomPos=function(){var e=Tiny.WIN_SIZE,t=e.width,o=e.height,r=n.foodConfig.maxR;return{x:Math.random()*(t-2*r)+2*r,y:Math.random()*(o-2*r)+2*r}},n.layer=e,n.foodNum=30,n.foodConfig={maxR:12,minR:4},n.color=[14204888,6591981,8388522,16747520,8421504,10506797,13047173,"res/images/star.png"],n.render(),n}return i(t,e),a(t,[{key:"drawSprite",value:function(e){var t=this.randomPos(),n=t.x,o=t.y,r=Tiny.Texture.fromImage(this.color[e]),i=new Tiny.Sprite(r);return i.setPosition(n,o),i.setScale(.06),i.setAnchor(.5),i}}]),t}(Tiny.Container);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={"s_Tiny.js_png":"res/images/Tiny.js.png"}},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(5),s=function(e){return e&&e.__esModule?e:{default:e}}(a),c=function(e){function t(e){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.initSnake=function(){for(var e=0;e<n.initLength;e++){var t=0===e&&"res/images/head.png"||"res/images/part.png",o=n.createSprite(t);0===e&&o.setScale(.35,.35),n.addChild(o),n.snakeBody.push(o)}n.layer.addChild(n)},n.createSprite=function(e){var t=Tiny.Texture.fromImage(e),n=new Tiny.Sprite(t);return n.setPosition(Tiny.WIN_SIZE.width/2,Tiny.WIN_SIZE.height/2),n.setScale(.3),n.setAnchor(.5),n.setRotation(Tiny.deg2radian(90)),n},n.run=function(e){var t=n.snakeConfig,o=t.distanceX,r=t.distanceY,i=n.children[0].width,a=i/2,s=Math.floor(i/n.speed);n.snakeBody.forEach(function(t,i){if(0===i){var c=180+Math.atan2(r,o)/(Math.PI/180)-90;return t.setRotation(Tiny.deg2radian(c)),t.x>Tiny.WIN_SIZE.width-a||t.y>Tiny.WIN_SIZE.height-a||t.x<a||t.y<a?(Tiny.app.stop(),void setTimeout(function(){alert("杯具, 您撞墙了, 大侠请重新来过."),location.reload()},50)):(t.setPosition(t.x+o,t.y+r),n.path.unshift({x:t.x,y:t.y}),n.eat(e),!0)}n.path.length>=i*s&&n.path[i*s-1]&&t.setPosition(n.path[i*s-1].x-o,n.path[i*s-1].y-r)}),n.path.length>n.snakeBody.length*s&&n.path.pop()},n.eat=function(e){var t=n.snakeBody[0],o=e.children;if(!o.length){Tiny.app.stop();var r=(Tiny.ticker.shared.lastTime/1e3).toFixed(0);return void setTimeout(function(){alert("您用时"+r+"s吃完所有食物,再接再厉哦~"),window.location.reload()},100)}o.forEach(function(o){var r=Math.abs(t.x-o.x),i=Math.abs(t.y-o.y);if(Math.sqrt(Math.pow(r,2)+Math.pow(i,2))<t.width/2+e.foodConfig.maxR+5){e.removeChild(o);var a=n.snakeBody[n.snakeBody.length-1],s=n.createSprite("res/images/part.png");s.setPosition(a.x,a.y),n.snakeBody.push(s),n.addChild(s)}})},n.layer=e,n.initLength=4,n.speed=5,n.snakeConfig={distanceX:n.speed,distanceY:0},n.path=[],n.snakeBody=[],n.initSnake(),n.x=0,n.y=0,new s.default(function(e){var t=e.x,o=e.y;t||o?(n.snakeConfig.distanceX=-n.speed*t,n.snakeConfig.distanceY=-n.speed*o,n.x=t,n.y=o):(n.snakeConfig.distanceX=-n.speed*n.x,n.snakeConfig.distanceY=-n.speed*n.y)}),n}return i(t,e),t}(Tiny.Container);t.default=c},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(3),c=o(s),u=n(1),f=o(u),l=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.food=new f.default(e),e.snake=new c.default(e),Tiny.app.onUpdate(function(){var t=(Tiny.ticker.shared.lastTime/1e3).toFixed(0);document.querySelector(".js-game-time").innerHTML="游戏时间: "+t+"s",e.snake.run(e.food)}),e}return a(t,e),t}(Tiny.Container);t.default=l},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function e(t){var n=this;o(this,e),this.bindEvent=function(){n.con.addEventListener(""+(n.isMobile&&"touchstart"||"mousedown"),function(e){n.flag=!0}),n.joy.addEventListener(""+(n.isMobile&&"touchmove"||"mousemove"),function(e){e.preventDefault()}),document.addEventListener(""+(n.isMobile&&"touchmove"||"mousemove"),function(e){if(n.flag){e.preventDefault();var t=n.isMobile&&e.touches[0]||e,o=t.pageX,r=t.pageY,i=o-n.joy_x-(n.con_x+n.con_r),a=r-n.joy_y-(n.con_y+n.con_r),s=n.joy_r-n.con_r,c=Math.sqrt(Math.pow(i,2)+Math.pow(a,2)),u=n.calc(i,a);n.callback(u),n.con.style.cssText=c>s?"left:"+(-s*u.x+n.joy_r)+"px;top:"+(-s*u.y+n.joy_r)+"px;":"left:"+(o-n.joy_x)+"px;top:"+(r-n.joy_y)+"px;"}}),document.addEventListener(""+(n.isMobile&&"touchend"||"mouseup"),function(e){n.flag=!1,n.con.style.cssText="left:50%;top:50%",n.callback({x:0,y:0})})},this.calc=function(e,t){var n=180+Math.atan2(t,e)/(Math.PI/180);return{x:Math.cos(n*(Math.PI/180)),y:Math.sin(n*(Math.PI/180))}},this.con=document.querySelector(".js-con"),this.joy=this.con.parentNode,this.callback=t||function(){},this.joy_x=parseInt(this.joy.offsetLeft),this.joy_y=parseInt(this.joy.offsetTop),this.con_x=parseInt(this.con.offsetLeft),this.con_y=parseInt(this.con.offsetTop),this.con_r=parseInt(this.con.offsetWidth)/2,this.joy_r=parseInt(this.joy.offsetWidth)/2,this.flag=!1,this.isMobile=/ipod|iphone|android|coolpad|mmp|smartphone|midp|wap|xoom|symbian|j2me|blackberry|win ce/i.test(navigator.userAgent),this.bindEvent()};t.default=r},function(e,t,n){e.exports=n(0)}]);